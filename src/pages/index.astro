---
import { CalendarView } from "../components/views/CalendarView";
import Layout from "../layouts/Layout.astro";

/**
 * Strona główna aplikacji - kalendarz treningowy.
 *
 * OCHRONA:
 * - Middleware przekierowuje niezalogowanych na /login (pierwsza linia obrony)
 * - Page-level guard poniżej (druga linia obrony - defense in depth)
 *
 * UWAGA: Astro.locals.user jest ustawiane przez middleware (src/middleware/index.ts)
 */

// Auth guard - weryfikacja że user jest zalogowany
const { user } = Astro.locals;

if (!user) {
  return Astro.redirect("/login");
}
---

<Layout>
  <CalendarView client:load />
</Layout>
