---
import { GoalView } from "../components/views/GoalView";
import Layout from "../layouts/Layout.astro";

/**
 * Strona celu treningowego użytkownika.
 *
 * OCHRONA:
 * - Middleware przekierowuje niezalogowanych na /login (pierwsza linia obrony)
 * - Page-level guard poniżej (druga linia obrony - defense in depth)
 *
 * UWAGA: Astro.locals.user jest ustawiane przez middleware (src/middleware/index.ts)
 */

// Auth guard - weryfikacja że user jest zalogowany
const { user } = Astro.locals;

if (!user) {
  return Astro.redirect("/login");
}
---

<Layout title="Mój cel treningowy">
  <GoalView client:load />
</Layout>
